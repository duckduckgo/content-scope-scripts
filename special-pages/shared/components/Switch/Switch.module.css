.label {
    --switch-width: 40px;
    --switch-height: 20px;
    --switch-handle-size: 12px;
    --switch-handle-offset: 4px;
    --switch-checked-offset: translateX(calc(100% + 8px));
    --track-border-radius: 11px;
    --track-border: 1px solid var(--track-border-color);

    /* Off state - Rest */
    --track-border-color: var(--ds-color-theme-control-border-secondary, var(--ds-color-theme-default-light-control-border-secondary));
    --track-bg-color: var(--ds-color-theme-control-fill-primary, var(--ds-color-theme-default-light-control-fill-primary));
    --switch-handle-color: var(--ds-color-theme-icons-secondary, var(--ds-color-theme-default-light-icons-secondary));

    /* Off state - Hover */
    --track-border-color-hover: var(--ds-color-theme-control-border-tertiary, var(--ds-color-theme-default-light-control-border-tertiary));
    --track-bg-color-hover: var(--ds-color-theme-control-fill-secondary, var(--ds-color-theme-default-light-control-fill-secondary));

    /* Off state - Pressed */
    --track-border-color-active: var(--ds-color-theme-control-border-quaternary, var(--ds-color-theme-default-light-control-border-quaternary));
    --track-bg-color-active: var(--ds-color-theme-control-fill-tertiary, var(--ds-color-theme-default-light-control-fill-tertiary));

    /* On state - Rest */
    --track-border-color-checked: var(--ds-color-theme-accent-primary, var(--ds-color-theme-default-light-accent-primary));
    --track-bg-color-checked: var(--ds-color-theme-accent-primary, var(--ds-color-theme-default-light-accent-primary));
    --switch-handle-color-checked: var(--ds-color-theme-accent-content-secondary, var(--ds-color-theme-default-light-accent-content-secondary));

    /* On state - Hover */
    --track-border-color-checked-hover: var(--ds-color-theme-accent-secondary, var(--ds-color-theme-default-light-accent-secondary));
    --track-bg-color-checked-hover: var(--ds-color-theme-accent-secondary, var(--ds-color-theme-default-light-accent-secondary));

    /* On state - Pressed */
    --track-border-color-checked-active: var(--ds-color-theme-accent-tertiary, var(--ds-color-theme-default-light-accent-tertiary));
    --track-bg-color-checked-active: var(--ds-color-theme-accent-tertiary, var(--ds-color-theme-default-light-accent-tertiary));

    &[data-theme="dark"] {
        /* Off state - Rest */
        --track-border-color: var(--ds-color-theme-control-border-secondary, var(--ds-color-theme-default-dark-control-border-secondary));
        --track-bg-color: var(--ds-color-theme-control-fill-primary, var(--ds-color-theme-default-dark-control-fill-primary));
        --switch-handle-color: var(--ds-color-theme-icons-secondary, var(--ds-color-theme-default-dark-icons-secondary));

        /* Off state - Hover */
        --track-border-color-hover: var(--ds-color-theme-control-border-tertiary, var(--ds-color-theme-default-dark-control-border-tertiary));
        --track-bg-color-hover: var(--ds-color-theme-control-fill-secondary, var(--ds-color-theme-default-dark-control-fill-secondary));

        /* Off state - Pressed */
        --track-border-color-active: var(--ds-color-theme-control-border-quaternary, var(--ds-color-theme-default-dark-control-border-quaternary));
        --track-bg-color-active: var(--ds-color-theme-control-fill-tertiary, var(--ds-color-theme-default-dark-control-fill-tertiary));

        /* On state - Rest */
        --track-border-color-checked: var(--ds-color-theme-accent-primary, var(--ds-color-theme-default-dark-accent-primary));
        --track-bg-color-checked: var(--ds-color-theme-accent-primary, var(--ds-color-theme-default-dark-accent-primary));
        --switch-handle-color-checked: var(--ds-color-theme-accent-content-secondary, var(--ds-color-theme-default-dark-accent-content-secondary));

        /* On state - Hover */
        --track-border-color-checked-hover: var(--ds-color-theme-accent-secondary, var(--ds-color-theme-default-dark-accent-secondary));
        --track-bg-color-checked-hover: var(--ds-color-theme-accent-secondary, var(--ds-color-theme-default-dark-accent-secondary));

        /* On state - Pressed */
        --track-border-color-checked-active: var(--ds-color-theme-accent-tertiary, var(--ds-color-theme-default-dark-accent-tertiary));
        --track-bg-color-checked-active: var(--ds-color-theme-accent-tertiary, var(--ds-color-theme-default-dark-accent-tertiary));
    }

    &[data-platform-name="macos"] {
        --switch-width: 26px;
        --switch-height: 15px;
        --switch-handle-size: 13px;
        --switch-handle-offset: 1px;
        --switch-checked-offset: translateX(calc(100% - 2px));
        --track-border-radius: 10px;
        --track-border: 0;

        /* Off state - use system colors */
        --track-bg-color: var(--color-black-at-9);
        --switch-handle-color: var(--color-white-at-84);

        /* Disable hover */
        --track-bg-color-hover: var(--track-bg-color);
        --track-border-color-hover: var(--track-border-color);
        --track-bg-color-checked-hover: var(--track-bg-color-checked);
        --track-border-color-checked-hover: var(--track-border-color-checked);

        /* On state - use theme accent for track, system colors for handle */
        --track-bg-color-checked: var(--ds-color-theme-accent-primary, var(--ds-color-theme-default-light-accent-primary));
        --track-border-color-checked: var(--ds-color-theme-accent-primary, var(--ds-color-theme-default-light-accent-primary));
        --switch-handle-color-checked: white;

        /* Pressed states */
        --track-bg-color-active: var(--track-bg-color);
        --track-bg-color-checked-active: var(--ds-color-theme-accent-secondary, var(--ds-color-theme-default-light-accent-secondary));
        --track-border-color-checked-active: var(--ds-color-theme-accent-secondary, var(--ds-color-theme-default-light-accent-secondary));
    }

    &[data-platform-name="macos"][data-size="medium"] {
        --switch-width: 32px;
        --switch-height: 18px;
        --switch-handle-size: 16px;
    }

    &[data-platform-name="macos"][data-theme="dark"] {
        /* Off state - use system colors */
        --track-bg-color: var(--color-white-at-9);
        --switch-handle-color: var(--color-white-at-84);

        /* On state - use theme accent for track, system colors for handle */
        --track-bg-color-checked: var(--ds-color-theme-accent-primary, var(--ds-color-theme-default-dark-accent-primary));
        --track-border-color-checked: var(--ds-color-theme-accent-primary, var(--ds-color-theme-default-dark-accent-primary));

        /* Pressed states */
        --track-bg-color-checked-active: var(--ds-color-theme-accent-secondary, var(--ds-color-theme-default-dark-accent-secondary));
        --track-border-color-checked-active: var(--ds-color-theme-accent-secondary, var(--ds-color-theme-default-dark-accent-secondary));
    }

    vertical-align: top;
    isolation: isolate;
    align-items: flex-start;
    max-inline-size: 100%;
    display: inline-flex;
    position: relative;
}

.input {
    box-sizing: border-box;
    opacity: .0001;
    z-index: 1;
    cursor: default;
    block-size: 100%;
    inline-size: 100%;
    margin: 0;
    padding: 0;
    position: absolute;
    top: 0;
    left: 0;
    border: initial;
    appearance: auto;
    background-color: initial;

    &:hover + .switch:after {
        background-color: var(--track-bg-color-hover);
        border-color: var(--track-border-color-hover);
    }

    &:active + .switch:after {
        background-color: var(--track-bg-color-active);
        border-color: var(--track-border-color-active);
    }

    &:checked + .switch:before {
        transform: var(--switch-checked-offset);
        background-color: var(--switch-handle-color-checked);
    }

    [data-theme="dark"][data-platform-name="macos"] &:checked + .switch:before {
        box-shadow: 0px 1px 1px 0px rgba(255, 255, 255, 0.10) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.10) inset;
        filter: drop-shadow(0px 1px 1px rgba(0, 0, 0, 0.10)) drop-shadow(0px 0px 1px rgba(0, 0, 0, 0.05));
    }

    &:checked + .switch:after {
        background: var(--track-bg-color-checked);
        border-color: var(--track-border-color-checked);
    }

    [data-theme="dark"][data-platform-name="macos"] &:checked + .switch:after {
        box-shadow: 0px 0px 1px 1px rgba(255, 255, 255, 0.10) inset, 0px 0px 0px 0.5px rgba(255, 255, 255, 0.06) inset;
    }

    &:checked:hover + .switch:after {
        background-color: var(--track-bg-color-checked-hover);
        border-color: var(--track-border-color-checked-hover);
    }

    &:checked:active + .switch:after {
        background-color: var(--track-bg-color-checked-active);
        border-color: var(--track-border-color-checked-active);
    }

    &[disabled] {
        cursor: not-allowed;
    }
}


.switch {
    box-sizing: border-box;
    inline-size: var(--switch-width);
    margin: 0;

    vertical-align: middle;
    will-change: transform;

    transition-delay: 0s;
    transition-duration: 0.13s;
    transition-property: background, border;
    transition-timing-function: ease-in-out, ease-in-out;

    block-size: var(--switch-height);
    border-radius: 10px;

    flex-grow: 0;
    flex-shrink: 0;
    display: inline-block;
    position: relative;
    left: 0;
    right: 0;

    &:before {
        content: "";
        box-sizing: border-box;
        inline-size: var(--switch-handle-size);
        block-size: var(--switch-handle-size);
        border-radius: 10px;
        display: block;
        position: absolute;
        top: var(--switch-handle-offset);
        left: var(--switch-handle-offset);
        z-index: 1;
        transition: all .3s;
        background: var(--switch-handle-color);
    }

    [data-platform-name="macos"] &:before {
        box-shadow: 0px 1px 1px 0px rgba(255, 255, 255, 0.10) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.10) inset;
        filter: drop-shadow(0px 1px 1px rgba(0, 0, 0, 0.10)) drop-shadow(0px 0px 1px rgba(0, 0, 0, 0.05));

    }
    [data-platform-name="macos"][data-theme="dark"] &:before {
        box-shadow: 0px 1px 1px 0px rgba(255, 255, 255, 0.10) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.10) inset;
        filter: drop-shadow(0px 1px 1px rgba(0, 0, 0, 0.10)) drop-shadow(0px 0px 1px rgba(0, 0, 0, 0.05));
    }

    &:after {
        border-radius: var(--track-border-radius);
        content: "";
        margin: 0;
        display: block;
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        transform: translateX(0);
        transition: all .3s;

        border: var(--track-border);
        background-color: var(--track-bg-color);
    }

    [data-platform-name="macos"] &:after {
        box-shadow: 0px 0.5px 1px 1px rgba(10, 15, 20, 0.04) inset, 0px 0px 0px 0.5px rgba(10, 15, 20, 0.12) inset;
    }

    [data-platform-name="macos"][data-theme="dark"] &:after {
        box-shadow: 0px 0px 1px 1px rgba(255, 255, 255, 0.10) inset, 0px 0px 0px 0.5px rgba(255, 255, 255, 0.06) inset;
    }
}
