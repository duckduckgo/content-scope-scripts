<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Modify localStorage</title>
    <link rel="stylesheet" href="../../shared/style.css">
    <script>
       window.localStorage.setItem('keyToBeDeleted', 'valueToBeDeleted')
       window.localStorage.setItem('otherKey', 'valueToRemain')
    </script>
</head>
<body>
    <script src="../../shared/utils.js"></script>
    <p><a href="../index.html">[WebCompat]</a></p>

    <p>This page verifies that localStorage modifications work properly given the <a href="../config/modify-localstorage.json">config</a>. At this time, only deletion is supported.</p>

    <script>
        // eslint-disable-next-line no-undef
        test('Only specified localStorage entry should be removed', async () => {
            const specifiedKey = window.localStorage.getItem('keyToBeDeleted')
            const nonexistentKey = window.localStorage.getItem('nonexistentKey')
            const otherKey = window.localStorage.getItem('otherKey')

            return [
                { name: 'specified localStorage entry deleted', result: specifiedKey, expected: null },
                { name: 'specified localStorage entry that is not present on page load', result: nonexistentKey, expected: null },
                { name: 'other localStorage entry untouched', result: otherKey, expected: 'valueToRemain' }
            ];
        });

        // eslint-disable-next-line no-undef
        renderResults();
    </script>
</body>
</html>
